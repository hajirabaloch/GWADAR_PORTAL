<!DOCTYPE html>
<html lang="ur" dir="rtl"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>واٹر ٹینکر کی درخواست - Water Tanker Request</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Replicating the Dashboard Theme */
        :root {
            --gwadar-dark-primary: #041c32; /* Very Deep Navy/Near Black */
            --gwadar-light-primary: #0077b6; /* Mid Blue for Accent */
            --gwadar-bg-gray: #f8f9fa;
        }
        body { 
            background-color: var(--gwadar-bg-gray);
            font-family: 'Arial', 'Noto Naskh Arabic', sans-serif;
        }

        /* Top Header and Sidebar Styles (copied from index.html for consistency) */
        .top-header {
            background-color: var(--gwadar-dark-primary);
            color: white;
            padding: 10px 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .logo-text { font-size: 1.5rem; font-weight: 700; }
        .sidebar { /* Simplified for this file, keeping the structure */
            width: 250px; position: fixed; top: 50px; right: 0; height: 100vh;
            background-color: #ffffff; padding-top: 20px; box-shadow: -2px 0 10px rgba(0, 0, 0, 0.05); z-index: 1000;
        }
        .sidebar a {
            padding: 15px 20px; text-decoration: none; font-size: 1.1rem; color: #333; display: block;
            transition: all 0.3s; border-right: 5px solid transparent;
        }
        .sidebar a:hover, .sidebar a.active {
            color: var(--gwadar-light-primary); background-color: #e9f5ff; border-right: 5px solid var(--gwadar-light-primary);
        }
        .main-content {
            margin-right: 250px; padding: 30px;
        }
        @media (max-width: 992px) {
            .sidebar { display: none; }
            .main-content { margin-right: 0; }
        }
        /* Form Specific Styling */
        .form-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .form-control:focus {
            border-color: var(--gwadar-light-primary);
            box-shadow: 0 0 0 0.25rem rgba(0, 119, 182, 0.25); /* Mid Blue Glow */
        }
        .ltr-text { direction: ltr; text-align: left; display: block; font-size: 0.8rem; }
    </style>
</head>
<body>
    
    <div class="top-header fixed-top d-flex justify-content-between align-items-center">
        <span class="logo-text">
            <i class="fa-solid fa-chart-line me-2"></i> گوادر سمارٹ سٹی ڈیش بورڈ
        </span>
        <div>
            <span class="badge bg-success me-2"><i class="fa-solid fa-circle-check"></i> System Operational</span>
            <a href="#" class="text-white text-decoration-none small">Eng</a> | <a href="#" class="text-white text-decoration-none small">اردو</a>
        </div>
    </div>
    
    <div class="sidebar d-none d-lg-block">
        <div class="px-3 mb-4">
            <p class="text-muted small fw-bold text-uppercase">مین نیویگیشن</p>
        </div>
        <a href="index.html">
            <i class="fa-solid fa-gauge me-2"></i> ڈیش بورڈ
        </a>
        <a href="about.html">
            <i class="fa-solid fa-info-circle me-2"></i> ہمارے بارے میں
        </a>
        <a href="faqs.html">
            <i class="fa-solid fa-question-circle me-2"></i> معاونت و سوالات
        </a>
        <a href="tel:+923456789012" class="active">
            <i class="fa-solid fa-truck-droplet me-2"></i> واٹر ٹینکر
        </a>
        <a href="Complaint_timing.html">
            <i class="fa-solid fa-exclamation-triangle me-2"></i> شکایات مرکز
        </a>
        <a href="Connection_request.html">
            <i class="fa-solid fa-bezier-curve me-2"></i> نیا کنکشن
        </a>
        <hr class="mx-3">
        <a href="#" class="text-danger">
            <i class="fa-solid fa-user-lock me-2"></i> ایڈمن لاگ ان
        </a>
    </div>
    
    <div class="main-content">
        
        <h2 class="mb-4" style="color: var(--gwadar-dark-primary);">
            <i class="fa-solid fa-truck-droplet me-2"></i> واٹر ٹینکر کی درخواست | Water Tanker Request
        </h2>
        <p class="lead text-muted mb-4">
            پانی کی فوری ضرورت یا باقاعدہ ترسیل کے لیے درخواست جمع کروائیں۔ <span class="ltr-text d-inline-block">(Submit your request for urgent or regular water delivery.)</span>
        </p>
        
        <div id="successMessage" class="alert alert-success d-none" role="alert">
            <h4 class="alert-heading">درخواست کامیابی سے جمع! | Request Submitted Successfully!</h4>
            <p id="successText">آپ کی واٹر ٹینکر کی درخواست وصول کر لی گئی ہے۔ ترسیل کا تخمینی وقت جلد ہی آپ کو بھیج دیا جائے گا۔</p>
        </div>

        <div class="form-card w-100 mx-auto">
            
            <form class="row g-4" id="tankerForm" action="https://script.google.com/macros/s/AKfycby6wz2iI_L9Csr-OnM9bsSgFe1wl_oeqgfEkBow9oaMKiPBZVcQwzGRRJQ_QjnWgabE/exec" method="POST">
                
                <div class="col-md-6">
                    <label for="requestType" class="form-label fw-bold">
                        درخواست کی نوعیت <span class="ltr-text">(Request Type)</span>
                    </label>
                    <select id="requestType" name="requestType" required class="form-select">
                        <option value="" disabled selected>منتخب کریں / Select</option>
                        <option value="Urgent Commercial">فوری (تجارتی) / Urgent (Commercial)</option>
                        <option value="Urgent Residential">فوری (رہائشی) / Urgent (Residential)</option>
                        <option value="Regular Supply">باقاعدہ ترسیل / Regular Supply</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label for="contactNumber" class="form-label fw-bold">
                        رابطہ نمبر <span class="ltr-text">(Contact Number)</span>
                    </label>
                    <input type="tel" id="contactNumber" name="contactNumber" required placeholder="03XXXXXXXXX (11 Digits)" pattern="[0-9]{11}" class="form-control" dir="ltr">
                    <div class="form-text ltr-text text-muted">Please enter a valid 11-digit mobile number.</div>
                </div>

                <div class="col-md-6">
                    <label for="quantityGallons" class="form-label fw-bold">
                        مطلوبہ مقدار <span class="ltr-text">(Required Quantity)</span>
                    </label>
                    <input type="number" id="quantityGallons" name="quantityGallons" required min="1000" max="50000" step="1000" placeholder="مثلاً: 5000 (Chambers/Gallons)" class="form-control" dir="ltr">
                    <div class="form-text ltr-text text-muted">Enter capacity in Chambers/Gallons (e.g., 5000).</div>
                </div>

                <div class="col-md-6">
                    <label for="deliveryTime" class="form-label fw-bold">
                        ترجیحی ترسیل کا وقت <span class="ltr-text">(Preferred Delivery Time)</span>
                    </label>
                    <input type="text" id="deliveryTime" name="deliveryTime" placeholder="کل صبح 8:00 بجے / E.g., Tomorrow at 8:00 AM" class="form-control">
                </div>
                
                <div class="col-12">
                    <label for="deliveryLocation" class="form-label fw-bold">
                        ترسیل کی مکمل جگہ <span class="ltr-text">(Delivery Location / Full Address)</span>
                    </label>
                    <textarea id="deliveryLocation" name="deliveryLocation" required placeholder="مثلاً: بلاک A، پلاٹ نمبر 45، مسجد روڈ، مین گوادر سٹی" rows="3" class="form-control"></textarea>
                    <div class="form-text text-muted">
                        تفصیلی پتہ درج کریں تاکہ ٹینکر آسانی سے پہنچ سکے۔ 
                        <span class="ltr-text d-block">(Enter detailed address for easy tanker access.)</span>
                    </div>
                </div>

                <div class="col-12 mt-4">
                    <button type="submit" class="btn btn-primary w-100 py-3 fw-bold" style="background-color: var(--gwadar-light-primary); border-color: var(--gwadar-light-primary);">
                        <i class="fa-solid fa-paper-plane me-2"></i> درخواست جمع کروائیں | Submit Tanker Request
                    </button>
                </div>
            </form>
        </div>

        <div class="alert alert-info mt-5 text-center">
            <h5 class="alert-heading"><i class="fa-solid fa-info-circle me-2"></i> ضروری معلومات</h5>
            <p class="mb-0 small">
                تمام درخواستیں 3.5 گھنٹے کے اندر اندر پروسیس کی جاتی ہیں۔ کسی بھی مسئلے کی صورت میں شکایات مرکز سے رجوع کریں۔
            </p>
            <a href="Complaint_timing.html" class="alert-link small fw-bold">شکایات مرکز پر جانے کے لیے یہاں کلک کریں</a>
        </div>
        
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Your existing form submission logic, slightly adapted for Bootstrap classes
        document.getElementById('tankerForm').addEventListener('submit', function(e) {
            e.preventDefault(); 

            const form = e.target;
            const formData = new FormData(form);
            const actionUrl = form.action;
            const submitButton = form.querySelector('button[type="submit"]');
            const successMessage = document.getElementById('successMessage');

            // Disable button and show loading state
            submitButton.disabled = true;
            submitButton.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> درخواست جمع ہو رہی ہے...';

            fetch(actionUrl, {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                // Check if response is okay (status 200-299)
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('Server error or Bad URL/Action.');
                }
            })
            .then(text => {
                // Reset form and show success message
                form.reset();
                successMessage.classList.remove('d-none');
                successMessage.classList.add('d-block');
                
                // Hide message after 7 seconds
                setTimeout(() => {
                    successMessage.classList.remove('d-block');
                    successMessage.classList.add('d-none');
                }, 7000); 

                console.log('Submission successful. Server message:', text);
            })
            .catch(error => {
                console.error('Submission Error:', error);

                // Display custom error message using Bootstrap Alert
                const errorBox = document.createElement('div');
                errorBox.className = 'alert alert-danger mt-4';
                errorBox.innerHTML = '<p class="fw-bold">خامی! | Error!</p><p>درخواست جمع نہیں ہو سکی۔ براہ کرم انٹرنیٹ کنکشن یا سروسز یو آر ایل چیک کریں۔</p>';
                form.prepend(errorBox);
                
                setTimeout(() => {
                    errorBox.remove();
                }, 8000); 
            })
            .finally(() => {
                // Re-enable button
                submitButton.disabled = false;
                submitButton.innerHTML = '<i class="fa-solid fa-paper-plane me-2"></i> درخواست جمع کروائیں | Submit Tanker Request';
            });
        });
    </script>
</body>
</html>